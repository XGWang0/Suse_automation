<?xml version="1.0"?>
<job>
    <config>
        <name>upgrade/restart Hamsta</name>
        <distributable>0</distributable>
        <parallel>0</parallel>
        <mail notify="0">vmarsik@suse.cz</mail>
        <logdir>/tmp</logdir>
        <description>Upgrade and restart Hamsta client</description>
        <motd>Hamsta upgrade and restart</motd>
    </config>

    <commands>
        <worker>
            <!-- Required -->
            <command execution="forked">#!/bin/sh
retv=0
for hamsta_rpm in qa_hamsta qa_hamsta-cmdline qa_hamsta-common qa_tools qa_lib_perl qa_lib_ctcs2 qa_lib_config qa_lib_keys
do
zypper -n in -l $hamsta_rpm
zypper_retv=$?
retv=$((retv + zypper_retv))
echo $retv
done
echo Restarting...
reboot &amp;
exit $retv
	    </command>

            <!-- Optional -->
            <directory>/</directory>
            <timeout>600</timeout>
            <notify pattern="" mail="" />

            <!-- Created for output -->
            <stdout />
            <stderr />
        </worker>
        
        <!-- Same options as in worker -->
        <logger>
            <command>tail -f /var/log/hamsta.log</command>
        </logger>
    </commands>
</job>
