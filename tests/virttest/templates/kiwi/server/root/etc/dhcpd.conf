# QA Automation test network DHCP configuration
ddns-update-style none;

shared-network {{ network.domain }} {
  next-server {{ network.server.ip }};
  option broadcast-address {{ network.broadcast_ip }};
  option subnet-mask {{ network.netmask }};
  option domain-name {{ network.domain }};
#  option ntp-servers {{ network.ntp }};
#  option smtp-server {{ network.smtp }};
  default-lease-time 3600;
  one-lease-per-client true;
  deny duplicates;

  # dynamic range
  subnet {{ network.address }} netmask {{ network.netmask }} { 
    range {{ network.dynamic_start }} {{ network.dynamic_end }}; 
    filename "pxelinux.0"; 
  }
}

# Infrastructure hosts
group {
  host {{ network.hamsta.name }} { 
    hardware ethernet {{ network.hamsta.mac }}; 
    fixed-address {{ network.hamsta.ip }};
  }
  host {{ network.qadb.name }} {
    hardware ethernet {{ network.qadb.mac }}; 
    fixed-address {{ network.qadb.ip }};
  }
  host {{ network.qadbreport.name }} {
    hardware ethernet {{ network.qadbreport.mac }}; 
    fixed-address {{ network.qadbreport.ip }};
  }
}

# SUTs
group {
  {% for sut in network.suts %}
  host {{ sut.name }} {
    hardware ethernet {{ sut.mac }};
    fixed-address {{ sut.ip }};
  }
  {% endfor %}
}